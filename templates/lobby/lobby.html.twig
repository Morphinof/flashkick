{% extends 'base.html.twig' %}

{% block title %}Hello LobbyController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <div style="float: left; margin-right:3rem;">
        <h3>Players</h3>
        <ul>
            {% for player in lobby.players %}
                <li>
                    {% if lobby.creator == player %}*{% endif %}
                    {{ player }}
                    {% if app.user.player == player %}
                        <a href="{{ path('flashkick_lobby_leave', {'lobby': lobby.id}) }}">Leave</a>
                    {% endif %}
                    {% if app.user.player == lobby.creator and player != lobby.creator %}
                        <a href="{{ path('flashkick_lobby_kick', {'lobby': lobby.id, 'player': player.id}) }}">Kick</a>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    </div>
    <div style="float: left;">
        <h3>Sets history</h3>
        {% for set in lobby.sets %}
            <p>Set {{ loop.index }}</p>
            {% for match in set.matches %}
                <ul>
                    <li>
                        {{ match.player1 }} VS {{ match.player2 }} |
                        {% if match.winner is not null %}
                            Winner {{ match.winner }}
                        {% elseif not match.ended %}
                            Pending...
                            <div>
                                {% if app.user.player == match.player1 or app.user.player == match.player2%}
                                    <a href="#">WON</a>
                                    <a href="#">LOOSE</a>
                                {% endif %}
                            </div>
                        {% else %}
                            Draw game
                        {% endif %}
                    </li>
                </ul>
            {% endfor %}
        {% endfor %}
    </div>
</div>
{% endblock %}
